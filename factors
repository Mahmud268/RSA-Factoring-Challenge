#include <stdio.h>
#include <stdlib.h>

void check_factor(int argc, char *argv[]) {
    int num2 = 1;
    int num1 = atoi(argv[2]);
    if (argc != 4) {
        for (int i = 3; i < argc; i++) {
            if (i > 3) {
                num2 *= atoi(argv[i]);
            }
        }
    } else {
        num2 = atoi(argv[3]);
    }

    char *num = argv[1];
    if (num2 > num1) {
        int temp = num1;
        num1 = num2;
        num2 = temp;
    }

    printf("%s%d*%d\n", num, num1, num2);
}

int main(int argc, char *argv[]) {
    if (argc != 2) {
        printf("Usage: %s <file>\n", argv[0]);
        return 1;
    } else {
        char *filename = argv[1];
        FILE *file = fopen(filename, "r");
        if (file == NULL) {
            perror("Error opening file");
            return 1;
        }

        char line[256];
        while (fgets(line, sizeof(line), file) != NULL) {
            char *result;
            char command[256];
            snprintf(command, sizeof(command), "factor %s", line);
            FILE *fp = popen(command, "r");
            if (fp == NULL) {
                perror("Error running factor command");
                fclose(file);
                return 1;
            }
            if (fgets(line, sizeof(line), fp) != NULL) {
                result = line;
            }
            pclose(fp);

            char *token = strtok(result, " ");
            while (token != NULL) {
                token = strtok(NULL, " ");
                if (token != NULL) {
                    printf("%s", token);
                }
            }
            printf("\n");
        }

        fclose(file);
        return 0;
    }
}
